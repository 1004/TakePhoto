{
  "name": "Takephoto",
  "tagline": "一款用于在Android设备上获取照片（拍照或从相册、文件中选择）、裁剪图片、压缩图片的开源工具库",
  "body": "## [TakePhoto](https://github.com/crazycodeboy/TakePhoto) 简介  \r\n`TakePhoto`是一款用于在Android设备上获取照片（拍照或从相册、文件中选择）、裁剪图片、压缩图片的开源工具库，目前最新版本[2.0.0](https://github.com/crazycodeboy/TakePhoto/)。  \r\n2.0以下版本及API说明，详见[TakePhoto1.0+](https://github.com/crazycodeboy/TakePhoto/blob/master/README%20-V1.0+.md)。  \r\n\r\n**V2.0**    \r\n\r\n- 支持通过相机拍照获取图片 \r\n- 支持从相册选择图片\r\n- 支持从文件选择图片  \r\n- 支持对图片进行压缩\r\n- 支持对图片进行裁剪\r\n- 支持对裁剪及压缩参数个性化配置  \r\n- 提供自带裁剪工具(可选)  \r\n- 支持智能选取及裁剪异常处理 \r\n- 支持因拍照Activity被回收后的自动恢复   \r\n\r\nGitHub地址： [https://github.com/crazycodeboy/TakePhoto](https://github.com/crazycodeboy/TakePhoto)\r\n## 预览图  \r\n\r\n运行效果图：    \r\n\r\n![运行效果图](https://raw.githubusercontent.com/crazycodeboy/TakePhoto/master/Screenshots/%E9%A2%84%E8%A7%88%E5%9B%BE.jpg)\r\n\r\n\r\n## 如何使用   \r\n### 使用TakePhoto有以下两种方式：\r\n**方式一：通过继承的方式**  \r\n1. 继承`TakePhotoActivity`、`TakePhotoFragmentActivity`、`TakePhotoFragment`三者之一。  \r\n2. 通过`getTakePhoto()`获取`TakePhoto`实例进行相关操作。  \r\n3. 重写以下方法获取结果        \r\n```java\r\nvoid takeSuccess(String imagePath);  \r\nvoid takeFail(String msg);\r\nvoid takeCancel();\r\n```  \r\n此方式使用简单，满足的大部分的使用需求，具体使用详见simple。如果通过继承的方式无法满足实际项目的使用，可以通过下面介绍的方式。  \r\n\r\n**方式二：通过组装的方式**  \r\n1. 获取TakePhoto实例`TakePhoto takePhoto=new TakePhotoImpl(getActivity(),this);`  \r\n2. 在 `onCreate`,`onActivityResult`,`onSaveInstanceState`方法中调用TakePhoto对用的方法。  \r\n3. 调用TakePhoto实例进行相关操作。  \r\n4. 在`TakeResultListener`相关方法中获取结果。      \r\n\r\n### 获取图片\r\nTakePhoto提供拍照，从相册选择，从文件中选择三种方式获取图片。    \r\n#### API:\r\n```java\r\n/**\r\n * 从文件中获取图片（不裁剪）\r\n */\r\nvoid onPickFromDocuments();\r\n/**\r\n * 从相册中获取图片（不裁剪）\r\n */\r\nvoid onPickFromGallery();\r\n/**\r\n * 从相机获取图片(不裁剪)\r\n * @param outPutUri 图片保存的路径\r\n */\r\nvoid onPickFromCapture(Uri outPutUri);\r\n```\r\n以上三种方式均提供对应的裁剪API，详见：[裁剪图片](https://github.com/crazycodeboy/TakePhoto#裁剪图片)。    \r\n**注：**  \r\n由于不同Android Rom厂商对系统有不同程度的定制，有可能导致某种选择图片的方式不支持，所以为了提高`TakePhoto`的兼容性，当某种选的图片的方式不支持时，`TakePhoto`会自动切换成使用另一种选择图片的方式进行图片选择。      \r\n\r\n### 裁剪图片  \r\n#### API  \r\n`TakePhoto`支持对图片进行裁剪，无论是拍照的照片,还是从相册、文件中选择的图片。你只需要调用`TakePhoto`的相应方法即可：  \r\n```java\r\n/**\r\n * 从相机获取图片并裁剪\r\n * @param outPutUri 图片裁剪之后保存的路径\r\n * @param options 裁剪配置             \r\n */\r\nvoid onPickFromCaptureWithCrop(Uri outPutUri, CropOptions options);\r\n/**\r\n * 从相册中获取图片并裁剪\r\n * @param outPutUri 图片裁剪之后保存的路径\r\n * @param options 裁剪配置\r\n */\r\nvoid onPickFromGalleryWithCrop(Uri outPutUri, CropOptions options);\r\n/**\r\n * 从文件中获取图片并裁剪\r\n * @param outPutUri 图片裁剪之后保存的路径\r\n * @param options 裁剪配置\r\n */\r\nvoid onPickFromDocumentsWithCrop(Uri outPutUri, CropOptions options);\r\n```   \r\n#### 对指定图片进行裁剪     \r\n另外，TakePhoto也支持你对指定图片进行裁剪：     \r\n\r\n```java\r\n/**\r\n * 裁剪图片\r\n * @param imageUri 要裁剪的图片\r\n * @param outPutUri 图片裁剪之后保存的路径\r\n * @param options 裁剪配置\r\n */\r\nvoid onCrop(Uri imageUri, Uri outPutUri, CropOptions options)throws TException;\r\n```\r\n#### CropOptions \r\n`CropOptions`是用于裁剪的配置类，通过它你可以对图片的裁剪比例，最大输出大小，以及是否使用`TakePhoto`自带的裁剪工具进行裁剪等，进行个性化配置。    \r\n\r\n**Usage:**  \r\n```java\r\n CropOptions cropOptions=new CropOptions.Builder().setAspectX(1).setAspectY(1).setWithOwnCrop(true).create();  \r\n getTakePhoto().onPickFromDocumentsWithCrop(imageUri,cropOptions);  \r\n //或  \r\n getTakePhoto().onCrop(imageUri,outPutUri,cropOptions);  \r\n\r\n```\r\n\r\n**注：**  \r\n由于不同Android Rom厂商对系统有不同程度的定制，有可能系统中没有自带或第三方的裁剪工具，所以为了提高`TakePhoto`的兼容性，当系统中没有自带或第三方裁剪工具时，`TakePhoto`会自动切换到使用`TakePhoto`自带的裁剪工具进行裁剪。  \r\n\r\n\r\n### 压缩图片 \r\n你可以选择是否对图片进行压缩处理，你只需要告诉它你是否要启用压缩功能以及`CompressConfig`即可。  \r\n#### API \r\n```java\r\n /**\r\n  * 启用图片压缩\r\n  * @param config 压缩图片配置\r\n  * @param showCompressDialog 压缩时是否显示进度对话框\r\n  * @return \r\n  */\r\n TakePhoto onEnableCompress(CompressConfig config,boolean showCompressDialog);\r\n```\r\n\r\n**Usage:**  \r\n\r\n```java\r\ngetTakePhoto().onEnableCompress(compressConfig,true).onPickFromGalleryWithCrop(imageUri,cropOptions);\r\n```  \r\n如果你启用了图片压缩，`TakePhoto`会使用`CompressImage`对图片进行压缩处理，`CompressImage`目前支持对图片的尺寸以及图片的质量进行压缩。默认情况下，`CompressImage`开启了尺寸与质量双重压缩。  \r\n#### 对指定图片进行压缩  \r\n另外，你也可以对指定图片进行压缩：    \r\n**Usage:**  \r\n \r\n```java\r\nnew CompressImageImpl(compressConfig).compress(picturePath, new CompressImage.CompressListener() {\r\n    @Override\r\n    public void onCompressSuccess(String imgPath) {//图片压缩成功\r\n        \r\n    }\r\n    @Override\r\n    public void onCompressFailed(String imagePath,String msg) {//图片压缩失败\r\n        \r\n    }\r\n});\r\n```\r\n#### CompressConfig  \r\n`CompressConfig`是用于图片压缩的配置类，你可以通过`CompressConfig.Builder`对图片压缩后的尺寸以及质量进行相关设置。如果你想改变压缩的方式可以通过`CompressConfig.Builder`进行相关设置。     \r\n**Usage:**   \r\n \r\n```java\r\nCompressConfig compressConfig=new CompressConfig.Builder().setMaxSize(50*1024).setMaxPixel(800).create();\r\ngetTakePhoto().onEnableCompress(compressConfig,true).onPickFromGallery();\r\n```\r\n\r\n\r\n## 兼容性\r\n### TakePhoto在深度兼容性方面的测试    \r\n![兼容性测试报告](https://raw.githubusercontent.com/crazycodeboy/TakePhoto/master/Screenshots/%E5%85%BC%E5%AE%B9%E6%80%A7%E6%B5%8B%E8%AF%95.jpg) \r\n\r\n### 获取更高的兼容性    \r\n`TakePhot`o是基于Android官方标准API编写的，适配了目前市场上主流的Rom。如果你在使用过程中发现了适配问题，可以[提交Issues](https://github.com/crazycodeboy/TakePhoto/issues)。   \r\n1. 为适配部分手机拍照时会回收`Activity`，`TakePhoto`在`onSaveInstanceState`与 `onCreate`做了相应的恢复处理。  \r\n2. 为适配部分手机拍照或从相册选择图片时屏幕方向会发生转变,从而导致拍照失败的问题，可以在AndroidManifest.xml中对使用了`TakePhoto`的`Activity`添加android:configChanges=\"orientation|keyboardHidden|screenSize\"配置。  \r\neg:  \r\n```\r\n<activity\r\n    android:name=\".MainActivity\"\r\n    android:screenOrientation=\"portrait\"\r\n    android:configChanges=\"orientation|keyboardHidden|screenSize\"\r\n    android:label=\"@string/app_name\" >\r\n    <intent-filter>\r\n        <action android:name=\"android.intent.action.MAIN\" />\r\n        <category android:name=\"android.intent.category.LAUNCHER\" />\r\n    </intent-filter>\r\n</activity>\r\n```\r\n\r\n## 在项目中使用    \r\n为方便大家使用，现已将TakePhoto V2.0.0发布到JCenter(如果你对如何将项目发布到JCenter感兴趣可以参考：《[教你轻松将Android library 发布到JCenter](http://blog.csdn.net/fengyuzhengfan/article/details/51407009))》  \r\nGradle:  \r\n```groovy \r\n    compile 'com.jph.takephoto:takephoto_library:2.0.0'\r\n```\r\n\r\nMaven:  \r\n```groovy \r\n<dependency>\r\n  <groupId>com.jph.takephoto</groupId>\r\n  <artifactId>takephoto_library</artifactId>\r\n  <version>2.0.0</version>\r\n  <type>pom</type>\r\n</dependency>\r\n```  \r\n## 最后  \r\n如果你对[TakePhoto](https://github.com/crazycodeboy/TakePhoto)有更好的建议或想改造它，欢迎大家[Fork and Pull requests](https://github.com/crazycodeboy/TakePhoto)。  \r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}